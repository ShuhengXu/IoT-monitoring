{"ast":null,"code":"var _jsxFileName = \"/Users/xu/project/IoT-monitoring/frontend/src/AskPanel.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QuestionBox = () => {\n  _s();\n  const [question, setQuestion] = useState('');\n  const [answer, setAnswer] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const handleAsk = async () => {\n    if (!question.trim()) return;\n    setLoading(true);\n    setAnswer('');\n    setError('');\n    try {\n      const response = await fetch('http://localhost:5001/api/ask', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          question\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setAnswer(data.answer);\n      } else {\n        setError(data.error || '服务器错误');\n      }\n    } catch (err) {\n      setError('无法连接服务器');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      marginTop: '3rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u667A\\u80FD\\u95EE\\u7B54\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: question,\n      onChange: e => setQuestion(e.target.value),\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u4F60\\u7684\\u95EE\\u9898...\",\n      style: {\n        width: '300px',\n        padding: '0.5rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAsk,\n      style: {\n        marginLeft: '1rem',\n        padding: '0.5rem 1rem'\n      },\n      children: \"\\u63D0\\u95EE\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u6B63\\u5728\\u83B7\\u53D6\\u56DE\\u7B54...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }, this), answer && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"AI \\u56DE\\u7B54\\uFF1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: answer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n};\n_s(QuestionBox, \"z5Rqw6S91Pm9ykqwDb2yVhUPUdA=\");\n_c = QuestionBox;\nexport default QuestionBox;\nvar _c;\n$RefreshReg$(_c, \"QuestionBox\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","QuestionBox","_s","question","setQuestion","answer","setAnswer","loading","setLoading","error","setError","handleAsk","trim","response","fetch","method","headers","body","JSON","stringify","data","json","ok","err","style","marginTop","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","width","padding","onClick","marginLeft","color","_c","$RefreshReg$"],"sources":["/Users/xu/project/IoT-monitoring/frontend/src/AskPanel.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\nconst QuestionBox: React.FC = () => {\n    const [question, setQuestion] = useState('');\n    const [answer, setAnswer] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n\n    const handleAsk = async () => {\n        if (!question.trim()) return;\n\n        setLoading(true);\n        setAnswer('');\n        setError('');\n\n        try {\n            const response = await fetch('http://localhost:5001/api/ask', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ question }),\n            });\n\n            const data = await response.json();\n            if (response.ok) {\n                setAnswer(data.answer);\n            } else {\n                setError(data.error || '服务器错误');\n            }\n        } catch (err) {\n            setError('无法连接服务器');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <section style={{ marginTop: '3rem' }}>\n            <h2>智能问答</h2>\n            <input\n                type=\"text\"\n                value={question}\n                onChange={(e) => setQuestion(e.target.value)}\n                placeholder=\"请输入你的问题...\"\n                style={{ width: '300px', padding: '0.5rem' }}\n            />\n            <button\n                onClick={handleAsk}\n                style={{ marginLeft: '1rem', padding: '0.5rem 1rem' }}\n            >\n                提问\n            </button>\n\n            {loading && <p>正在获取回答...</p>}\n            {answer && (\n                <div style={{ marginTop: '1rem' }}>\n                    <strong>AI 回答：</strong>\n                    <p>{answer}</p>\n                </div>\n            )}\n            {error && <p style={{ color: 'red' }}>{error}</p>}\n        </section>\n    );\n};\n\nexport default QuestionBox;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}